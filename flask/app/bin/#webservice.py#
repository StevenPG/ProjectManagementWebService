'''
@author: Steven Gantz
@date: 2/4/2016
@file: This file is the main handler for the front facing
 web service. All communication will be done through this
 module and other submodules.
'''

# Web service imports
from flask import Flask

# Database module imports
import sqlite3

''' Name the application module '''
app = Flask(__name__)

# Route past IP address
@app.route('/')
def main():
    return 'Hello, World!'

@app.route('/databasetest')
def dbtest():
    conn = sqlite3.connect('test-db')
    c = conn.cursor()
    
    # Create table
    c.execute('''CREATE TABLE names             (date text, trans text, symbol text, qty real, price real)''')

    # Insert a row of data
    c.execute("INSERT INTO names VALUES ('2006-01-05','BUY','RHAT',100,35.14)")

    # Save (commit) the changes
    conn.commit()

    # We can also close the connection if we are done with it.
    # Just be sure any changes have been committed or they will be lost.
    conn.close()
    
    return 'test'

#Implement autorunner when run locally
if __name__ == '__main__':
    app.run(host='0.0.0.0')
